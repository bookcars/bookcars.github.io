(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function n(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(e){if(e.ep)return;e.ep=!0;const a=n(e);fetch(e.href,a)}})();let p="en";const y="/";function w(s){document.querySelectorAll("[data-i18n]").forEach(t=>{const e=t.getAttribute("data-i18n");s[e]&&(t.textContent=s[e])}),document.querySelectorAll("[data-i18n-placeholder]").forEach(t=>{const e=t.getAttribute("data-i18n-placeholder"),a=s[e];a&&t.setAttribute("placeholder",a)});const n=localStorage.getItem("lang")||"en";fetch(`${y}locales/${n}.json`).then(t=>t.json()).then(t=>{document.querySelectorAll("[data-i18n]").forEach(e=>{const a=e.getAttribute("data-i18n"),c=t[a];if(!c)return;/<\/?[a-z][\s\S]*>/i.test(c)?e.innerHTML=c:e.textContent=c})}).catch(t=>console.error(`Failed to load ${n} translations`,t))}async function i(s){try{localStorage.setItem("lang",s),document.documentElement.lang=s;const o=await fetch(`locales/${s}.json`);if(!o.ok)throw new Error(`HTTP ${o.status}`);const n=await o.json();w(n),p=s,document.title=n["website.title"],document.querySelectorAll("[data-lang]").forEach(t=>{t.removeAttribute("data-selected"),t.getAttribute("data-lang")===s&&t.setAttribute("data-selected","true")})}catch(o){console.error(`Failed to load ${s} translations:`,o)}}window.addEventListener("DOMContentLoaded",()=>{const o=new URLSearchParams(window.location.search).get("lang"),n=localStorage.getItem("lang"),t=["en","fr","es"],e=t.includes(o)?o:t.includes(n)?n:"en";i(e)});window.setLang=i;async function b(){const o=new URLSearchParams(window.location.search).get("lang")||localStorage.getItem("lang")||"en";try{const n=await fetch(`locales/${o}.json`);if(!n.ok)throw new Error(`HTTP ${n.status}`);const t=await n.json();document.documentElement.lang=o,document.title=t["website.title"]||"BookCars",window.translations=t,window.currentLang=o,localStorage.setItem("lang",o)}catch(n){console.error(`Failed to load translations for ${o}:`,n),window.translations={}}finally{document.documentElement.removeAttribute("data-loading")}}b();window.addEventListener("DOMContentLoaded",()=>{window.translations?applyTranslations(window.translations):i("en");const s=document.querySelector(".hamburger"),o=document.querySelector("nav");s.addEventListener("click",()=>{const r=s.getAttribute("aria-expanded")==="true";s.setAttribute("aria-expanded",!r),s.classList.toggle("active"),o.classList.toggle("active")}),window.addEventListener("scroll",()=>{const r=document.querySelector("header");window.scrollY>10?r.classList.add("scrolled"):r.classList.remove("scrolled")});const n=document.getElementById("lang-toggle"),t=document.getElementById("lang-menu");n.addEventListener("click",()=>{const r=n.getAttribute("aria-expanded")==="true";n.setAttribute("aria-expanded",!r),t.hidden=r}),t.querySelectorAll("button").forEach(r=>{r.addEventListener("click",()=>{const l=r.getAttribute("data-lang");i(l),n.setAttribute("aria-expanded",!1),t.hidden=!0})}),document.addEventListener("click",r=>{!n.contains(r.target)&&!t.contains(r.target)&&(n.setAttribute("aria-expanded","false"),t.hidden=!0)});const e=document.getElementById("theme-toggle"),a=e.querySelector(".icon-sun"),c=e.querySelector(".icon-moon"),d=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",d),u(d),e.addEventListener("click",()=>{const l=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";document.documentElement.setAttribute("data-theme",l),localStorage.setItem("theme",l),u(l)});function u(r){r==="dark"?(a.style.display="block",c.style.display="none",e.setAttribute("aria-pressed","true")):(a.style.display="none",c.style.display="block",e.setAttribute("aria-pressed","false"))}async function g(){try{const l=`https://raw.githubusercontent.com/aelassas/bookcars/main/.github/latest-release.json?t=${Date.now()}`,m=await fetch(l);if(!m.ok)throw new Error("Failed to fetch latest release info");const f=await m.json(),h=document.getElementById("download-mobile-app");h.href=f.latestApkUrl}catch(r){console.error(r),document.getElementById("demo-mobile-app").style.display="none"}}g(),document.getElementById("year").textContent=new Date().getFullYear()});
