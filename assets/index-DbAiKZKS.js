(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function a(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(e){if(e.ep)return;e.ep=!0;const o=a(e);fetch(e.href,o)}})();let g="en";function f(n){document.querySelectorAll("[data-i18n]").forEach(t=>{const e=t.getAttribute("data-i18n");n[e]&&(t.textContent=n[e])}),document.querySelectorAll("[data-i18n-placeholder]").forEach(t=>{const e=t.getAttribute("data-i18n-placeholder"),o=n[e];o&&t.setAttribute("placeholder",o)});const a=localStorage.getItem("lang")||"en";fetch(`./locales/${a}.json`).then(t=>t.json()).then(t=>{document.querySelectorAll("[data-i18n]").forEach(e=>{const o=e.getAttribute("data-i18n"),s=t[o];if(!s)return;/<\/?[a-z][\s\S]*>/i.test(s)?e.innerHTML=s:e.textContent=s})}).catch(t=>console.error(`Failed to load ${a} translations`,t))}async function h(n){try{localStorage.setItem("lang",n),document.documentElement.lang=n;const r=await fetch(`locales/${n}.json`);if(!r.ok)throw new Error(`HTTP ${r.status}`);const a=await r.json();f(a),g=n,document.querySelectorAll(".lang-switcher button").forEach(t=>{const e=t.textContent.trim().toLowerCase();t.classList.toggle("active-lang",e===n.toLowerCase())})}catch(r){console.error(`Failed to load ${n} translations:`,r)}}window.addEventListener("DOMContentLoaded",()=>{const r=new URLSearchParams(window.location.search).get("lang"),a=localStorage.getItem("lang"),t=["en","fr","es"],e=t.includes(r)?r:t.includes(a)?a:"en";h(e)});window.addEventListener("DOMContentLoaded",()=>{const n=document.querySelector(".hamburger"),r=document.querySelector("nav");n.addEventListener("click",()=>{const c=n.getAttribute("aria-expanded")==="true";n.setAttribute("aria-expanded",!c),n.classList.toggle("active"),r.classList.toggle("active")});const a=document.getElementById("theme-toggle"),t=a.querySelector(".icon-sun"),e=a.querySelector(".icon-moon"),o=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",o),s(o),a.addEventListener("click",()=>{const l=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";document.documentElement.setAttribute("data-theme",l),localStorage.setItem("theme",l),s(l)});function s(c){c==="dark"?(t.style.display="block",e.style.display="none",a.setAttribute("aria-pressed","true")):(t.style.display="none",e.style.display="block",a.setAttribute("aria-pressed","false"))}async function i(){try{const l=`https://raw.githubusercontent.com/aelassas/bookcars/main/.github/latest-release.json?t=${Date.now()}`,d=await fetch(l);if(!d.ok)throw new Error("Failed to fetch latest release info");const u=await d.json(),m=document.getElementById("download-mobile-app");m.href=u.latestApkUrl}catch(c){console.error(c),document.getElementById("demo-mobile-app").style.display="none"}}i(),document.getElementById("year").textContent=new Date().getFullYear()});
